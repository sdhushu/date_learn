# 引用类型

+ 引用类型的变量是数据的引用，数据存储在数据堆中
+ 引用类型是把数据和功能组织在一起的结构，也称对象定义，描述了自己的对象应有的属性和方法
+ string和class统称为引用类型 只在栈中分配一片内存用于容乃地址 不分配堆上的内存空间
+ 使用new创建实例时分配堆上空间
+ 在进程堆上分配(动态分配)
+ 只复制对象的引用，不复制对象本身
+ 在js里 引用类型分为两类
  + 基本类型内存大小是固定的，系统自动分配内存
  + 基本引用类型
    + 大小不固定，存在堆内存，js不允许操作堆内存，只能操作引用
  + 集合应用类型

# 值类型

+ 值类型的变量是直接存储数据
+ byte short int long float double char bool struct统称为值类型
+ 值类型变量声明后不管是否赋值 编译器都已经为其分配内存
+ 赋值时将复制包含的值
+ 在线程堆上分配(静态分配)

# 内存布局

+ 数组的元素不管是值类型还是引用类型 存储在托管堆上
+ 引用类型在栈中存储一个引用，实际位置在托管堆上
+ 值类型分配在声明的地方，作为字段时跟随所属变量存储，作为局部变量时，存储在栈上

+ 值类型在内存管理方面有更好的效率，不支持多态，适合做存储数据的载体，值类型都是密封的
+ 引用类型支持多态,适合用于自定义程序的行为，引用类型可以派生出新的类型

# 经历使用

+ 在一个循环中，如果将一个引用类型在循环外声明，在循环中赋不同的值，这时运行后会发现集合中引用类型对象的集合都是相同的值，这是因为集合内存储的是同一个栈上的引用地址，而非具体在堆上的值
+ 如果是值类型 无论循环内外都能赋不同的值并存储

# 为什么js数组是引用类型？

+ 如果数组，对象是值类型，那么赋值的适合按照值传递会开辟新的内存空间(内存有限，节省系统内存)
+ 在多数情况下我们希望数组，对象是引用类型，修改前一个自动改变根(便于后期管理)

# v8内存大小

+ v8有内存限制，以1.5G内存为例，v8一次小的垃圾回收需要50ms，全量回收需要1秒
+ v8在64位系统下最多只能使用1.4GB内存，在32位系统下最多使用0.7GB内存
  ### 为什么要对内存进行限制

  + js是单线程的，垃圾回收时所有逻辑暂停，垃圾回收阻碍主线程执行
  + 垃圾回收是一件高耗时的操作，内存使用越高，垃圾回收进程越慢，浏览器越长时间得不到响应